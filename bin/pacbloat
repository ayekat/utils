#!/usr/bin/env zsh
# List all Arch Linux packages currently installed on the system which are not
# part of the 'base-devel' group, and which have been explicitely installed
# while not being required for any other package.

t=t
if [ "$1" = '-a' ]; then
	t=''
fi
diff <(pacman -Qqg base-devel | sort -u) <(pacman -Q${t}qe | sort -u) | \
	grep '^>' | awk '{print $2}'
